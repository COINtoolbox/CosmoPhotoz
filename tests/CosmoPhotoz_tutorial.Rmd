---
title: "CosmoPhotoz"
author: "Rafael S. de Souza, ..."
date: "18 de agosto de 2014"
output: pdf_document
---

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:



This is an R Markdown document to explain in simple terms the use of Generalized Linear Models into Astronomy reproducing the main results from Ewan et al (2014).


# Required libraries
```{r,results='hide',message=FALSE, cache=FALSE}
require(CosmoPhotoz)
```

Load the data:

```{r, echo=FALSE}
data(PHAT0train)


data(PHAT0test)
```

Take a look on the data 





```{r, echo=FALSE}
PC_comb<-computeCombPCA(subset(PHAT0train,select=c(-redshift)),
                       subset(PHAT0test,select=c(-redshift)))
```

Add the redshift column to the PCA projections of the  Training sample

```{r, echo=FALSE}
Trainpc<-cbind(PC_comb$x,redshift=PHAT0train$redshift)

```

Store the PCA projections for the testing sample in the vector Testpc

```{r, echo=FALSE}
Testpc<-PC_comb$y
```


Train  the glm model using gamma family

glmfit<-glmTrainPhotoZ(Trainpc,method="Bayesian",family="gamma")
